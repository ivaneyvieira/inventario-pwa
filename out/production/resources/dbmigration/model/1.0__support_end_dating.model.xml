<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<migration xmlns="http://ebean-orm.github.io/xml/ns/dbmigration">
    <changeSet type="apply">
        <createTable name="cl" identityType="identity" pkName="pk_cl">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="clno" type="integer" notnull="true"/>
            <column name="departamento" type="varchar" notnull="true"/>
            <column name="grupo" type="varchar" notnull="true"/>
            <column name="secao" type="varchar" notnull="true"/>
        </createTable>
        <createTable name="coleta" identityType="identity" pkName="pk_coleta">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="numleitura" type="integer" notnull="true"/>
            <column name="Inventario_id" type="bigint" notnull="true" references="inventario.id" foreignKeyName="fk_coleta_inventario_id" foreignKeyIndex="ix_coleta_inventario_id"/>
            <column name="lote_id" type="bigint" notnull="true" references="lote.id" foreignKeyName="fk_coleta_lote_id" foreignKeyIndex="ix_coleta_lote_id"/>
            <column name="usuario_id" type="bigint" notnull="true" references="usuario.id" foreignKeyName="fk_coleta_usuario_id" foreignKeyIndex="ix_coleta_usuario_id"/>
            <column name="coletor" type="integer" notnull="true"/>
            <column name="status" type="varchar(7)" notnull="true" checkConstraint="check ( status in ('FECHADO','ABERTO'))" checkConstraintName="ck_coleta_status"/>
        </createTable>
        <createTable name="fornecedor" identityType="identity" pkName="pk_fornecedor">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="codigo" type="varchar" notnull="true"/>
            <column name="fantazia" type="varchar" notnull="true"/>
            <column name="razao" type="varchar" notnull="true"/>
        </createTable>
        <createTable name="inventario" identityType="identity" pkName="pk_inventario">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="numero" type="integer" notnull="true"/>
            <column name="data" type="date" notnull="true"/>
            <column name="observacao" type="varchar" notnull="true"/>
            <column name="tipoInventario" type="varchar(16)" notnull="true" checkConstraint="check ( tipoInventario in ('Com divergencias','Simples'))" checkConstraintName="ck_inventario_tipoinventario"/>
            <column name="statusInventario" type="varchar(7)" notnull="true" checkConstraint="check ( statusInventario in ('Aberto','Fechado'))" checkConstraintName="ck_inventario_statusinventario"/>
            <column name="loja_id" type="bigint" notnull="true" references="loja.id" foreignKeyName="fk_inventario_loja_id" foreignKeyIndex="ix_inventario_loja_id"/>
            <column name="fornecedor_id" type="bigint" references="fornecedor.id" foreignKeyName="fk_inventario_fornecedor_id" foreignKeyIndex="ix_inventario_fornecedor_id"/>
            <column name="cl_id" type="bigint" references="cl.id" foreignKeyName="fk_inventario_cl_id" foreignKeyIndex="ix_inventario_cl_id"/>
        </createTable>
        <createTable name="loja" identityType="identity" pkName="pk_loja">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="endereco" type="varchar" notnull="true"/>
            <column name="nome" type="varchar" notnull="true"/>
            <column name="sigla" type="varchar" notnull="true"/>
            <column name="storeno" type="integer" notnull="true"/>
        </createTable>
        <createTable name="lote" identityType="identity" pkName="pk_lote">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="descricao" type="varchar" notnull="true"/>
            <column name="loteavulso" type="boolean" defaultValue="false" notnull="true"/>
            <column name="numero" type="varchar" notnull="true"/>
            <column name="loja_id" type="bigint" notnull="true" references="loja.id" foreignKeyName="fk_lote_loja_id" foreignKeyIndex="ix_lote_loja_id"/>
        </createTable>
        <createTable name="produto" identityType="identity" pkName="pk_produto">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="barcode" type="varchar" notnull="true"/>
            <column name="codigo" type="varchar" notnull="true"/>
            <column name="descricao" type="varchar" notnull="true"/>
            <column name="duplicado" type="boolean" defaultValue="false" notnull="true"/>
            <column name="foralinha" type="boolean" defaultValue="false" notnull="true"/>
            <column name="grade" type="varchar" notnull="true"/>
            <column name="usoconsumo" type="boolean" defaultValue="false" notnull="true"/>
            <column name="cl_id" type="bigint" notnull="true" references="cl.id" foreignKeyName="fk_produto_cl_id" foreignKeyIndex="ix_produto_cl_id"/>
            <column name="fornecedor_id" type="bigint" notnull="true" references="fornecedor.id" foreignKeyName="fk_produto_fornecedor_id" foreignKeyIndex="ix_produto_fornecedor_id"/>
        </createTable>
        <createTable name="usuario" identityType="identity" pkName="pk_usuario">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="version" type="integer" notnull="true"/>
            <column name="matricula" type="integer" notnull="true"/>
            <column name="nome" type="varchar" notnull="true"/>
            <column name="senha" type="varchar" notnull="true"/>
            <column name="apelido" type="varchar" notnull="true"/>
        </createTable>
    </changeSet>
</migration>